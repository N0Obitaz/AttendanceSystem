<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - AttendanceSystem</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />

    <link rel="stylesheet" href="~/css/output.css" asp-append-version="true"/>
    @* <link rel="stylesheet" href="~/AttendanceSystem.styles.css" asp-append-version="true" /> *@
</head>

@{
        // 1. C# Helper for Active State (Keeps code clean)
        string ActiveClass(string page)
        {
                return ViewContext.RouteData.Values["page"]?.ToString()?.Equals(page, StringComparison.OrdinalIgnoreCase) == true
                        ? "bg-teal-700 text-white"
                        : "text-slate-600 hover:bg-teal-50 hover:text-teal-700";
        }
}
 @if (ViewData["HideHeader"] == null || !(bool)ViewData["HideHeader"])
{
    <header>
        <!-- Tailwind Sidebar: Fixed position, full height, dark background, fixed width -->
        <div id="mobile-drawer" class="relative z-50 hidden" role="dialog" aria-modal="true">

            <div id="drawer-backdrop"
                 class="fixed inset-0 bg-gray-900/80 opacity-0 transition-opacity ease-linear duration-300"
                 onclick="toggleDrawer()"></div>

            <div class="fixed inset-0 flex">
                <div id="drawer-panel" class="relative mr-16 flex w-full max-w-xs flex-1 -translate-x-full transform transition ease-in-out duration-300">

                    <div class="absolute left-full top-0 flex w-16 justify-center pt-5">
                        <button type="button" class="-m-2.5 p-2.5 text-white" onclick="toggleDrawer()">
                            <span class="sr-only">Close sidebar</span>
                            <i class="bi bi-x-lg text-2xl"></i>
                        </button>
                    </div>

                    <div class="flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-4">
                        <div class="flex h-16 shrink-0 items-center justify-center mt-4">
                            <img src="/images/cdm.png" alt="CDM Logo" class="w-16 h-auto">
                        </div>

                        <nav class="flex flex-1 flex-col">
                            <ul role="list" class="flex flex-1 flex-col gap-y-7">
                                <li>
                                    <partial name="~/Pages/student_view/Shared/_StudentNavLinks.cshtml" />
                                </li>
                                <li class="mt-auto">
                                    <a href="/Logout/Index" class="group -mx-2 flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6 text-red-600 hover:bg-red-50">
                                        <i class="bi bi-box-arrow-right text-lg shrink-0"></i>
                                        Logout
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>

        <div class="hidden md:fixed md:inset-y-0 md:z-50 md:flex md:w-72 md:flex-col">
            <div class="flex grow flex-col gap-y-5 overflow-y-auto border-r border-gray-200 bg-white px-6 pb-4">
                <div class="flex h-16 shrink-0 items-center justify-center mt-6">
                    <img src="/images/cdm.png" alt="CDM Logo" class="w-20 h-auto rounded-full ring-2 ring-teal-500/50">
                </div>
                <div class="text-center font-bold text-teal-800 tracking-wider">DASHBOARD</div>

                <nav class="flex flex-1 flex-col">
                    <ul role="list" class="flex flex-1 flex-col gap-y-7">
                        <li>
                            <partial name="~/Pages/student_view/Shared/_StudentNavLinks.cshtml" />
                        </li>

                        <li class="mt-auto">
                            <a href="/Logout/Index" class="group -mx-2 flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6 text-red-600 hover:bg-red-50">
                                <i class="bi bi-box-arrow-right text-lg shrink-0"></i>
                                Logout
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>

        <div class="sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm md:hidden">
            <button type="button" class="-m-2.5 p-2.5 text-gray-700 lg:hidden" onclick="toggleDrawer()">
                <span class="sr-only">Open sidebar</span>
                <i class="bi bi-list text-2xl"></i>
            </button>
            <div class="flex-1 text-sm font-semibold leading-6 text-gray-900">Dashboard</div>
        </div>

        <script>
            function toggleDrawer() {
                const drawer = document.getElementById('mobile-drawer');
                const backdrop = document.getElementById('drawer-backdrop');
                const panel = document.getElementById('drawer-panel');

                if (drawer.classList.contains('hidden')) {
                    drawer.classList.remove('hidden');
                    setTimeout(() => {
                        backdrop.classList.remove('opacity-0');
                        panel.classList.remove('-translate-x-full');
                    }, 10);
                } else {
                    backdrop.classList.add('opacity-0');
                    panel.classList.add('-translate-x-full');
                    setTimeout(() => {
                        drawer.classList.add('hidden');
                    }, 300);
                }
            }
        </script>
    </header>
}


<body class="h-full bg-gray-50">

    <div class="md:pl-72 flex flex-col min-h-screen">

        <div class="p-4 sm:p-8">

            <div class="w-full mt-6 bg-white rounded-xl sm:p-4 border border-gray-100 shadow-sm">
                <main role="main" class="w-full mx-auto p-2 py-1 sm:py-6 max-w-7xl">
                    <div class="container mx-auto p-2 w-full font-sans">
                        @RenderBody()
                    </div>
                </main>
            </div>

        </div>
    </div>

</body>

    @* <footer class="border-top footer text-muted">
        <div class="container">
            &copy; 2025 - AttendanceSystem - <a asp-area="" asp-page="/Privacy">Privacy</a>
        </div>
    </footer> *@ 

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @* <script src="~/js/clock.js" asp-append-version="true"></script> *@

    @await RenderSectionAsync("Scripts", required: false)

</html>